buildscript {
    repositories {
        mavenCentral()
        files 'build/classes/main'
    }
    dependencies {
        classpath("mysql:mysql-connector-java:$mySQLDriverVersion")
        classpath files('build/classes/main/')
    }
}

plugins {
    id 'java'
    id 'idea'
    id 'org.liquibase.gradle' version '1.1.1'
}

repositories {
    mavenCentral()
}

dependencies {
    compile("org.springframework:spring-core:$springVersion")
    compile("org.springframework:spring-web:$springVersion")
    compile("org.springframework:spring-webmvc:$springVersion")
    compile("org.springframework:spring-orm:$springVersion")
    compile("org.springframework:spring-jdbc:$springVersion")

    compile("org.springframework.boot:spring-boot-starter-web:$springBootVersion")

    compile("org.apache.tomcat.embed:tomcat-embed-jasper:$tomcatVersion")

    compile("org.hibernate:hibernate-core:$hibernateVersion")

    compile("mysql:mysql-connector-java:$mySQLDriverVersion")

}

liquibase {
    activities {
        main {
            changeLogFile 'src/main/resources/dbchangelog.xml'
            url 'jdbc:mysql://localhost:3306/cafe'
            username 'root'
            password 'root'
        }
    }
    runList = 'main'
}

task updateChangeLog(type: Exec) {
    commandLine 'gradle', 'update'
}
updateChangeLog.dependsOn compileJava
